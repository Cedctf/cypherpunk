{"version":"0.1.0","name":"subscription","instructions":[{"name":"initialize","accounts":[{"name":"programState","isMut":true,"isSigner":false},{"name":"programVault","isMut":true,"isSigner":false},{"name":"owner","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"createPlan","accounts":[{"name":"programState","isMut":true,"isSigner":false},{"name":"plan","isMut":true,"isSigner":false},{"name":"owner","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"price","type":"u64"},{"name":"duration","type":"i64"}]},{"name":"subscribe","accounts":[{"name":"programState","isMut":false,"isSigner":false},{"name":"plan","isMut":false,"isSigner":false},{"name":"userSubscription","isMut":true,"isSigner":false},{"name":"programVault","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"planId","type":"u32"}]},{"name":"cancelSubscription","accounts":[{"name":"userSubscription","isMut":true,"isSigner":false},{"name":"user","isMut":false,"isSigner":true}],"args":[]},{"name":"withdraw","accounts":[{"name":"programState","isMut":false,"isSigner":false},{"name":"programVault","isMut":true,"isSigner":false},{"name":"owner","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"isSubscriptionActive","accounts":[{"name":"userSubscription","isMut":false,"isSigner":false},{"name":"user","isMut":false,"isSigner":false}],"args":[],"returns":"bool"}],"accounts":[{"name":"ProgramState","type":{"kind":"struct","fields":[{"name":"owner","type":"publicKey"},{"name":"nextPlanId","type":"u32"},{"name":"vaultBump","type":"u8"}]}},{"name":"SubscriptionPlan","type":{"kind":"struct","fields":[{"name":"planId","type":"u32"},{"name":"price","type":"u64"},{"name":"duration","type":"i64"},{"name":"active","type":"bool"}]}},{"name":"UserSubscription","type":{"kind":"struct","fields":[{"name":"user","type":"publicKey"},{"name":"planId","type":"u32"},{"name":"startTime","type":"i64"},{"name":"endTime","type":"i64"},{"name":"active","type":"bool"}]}}],"events":[{"name":"PlanCreated","fields":[{"name":"planId","type":"u32","index":false},{"name":"price","type":"u64","index":false},{"name":"duration","type":"i64","index":false}]},{"name":"Subscribed","fields":[{"name":"user","type":"publicKey","index":false},{"name":"planId","type":"u32","index":false},{"name":"endTime","type":"i64","index":false}]},{"name":"SubscriptionCancelled","fields":[{"name":"user","type":"publicKey","index":false}]}],"errors":[{"code":6000,"name":"PlanInactive","msg":"Plan does not exist or is inactive"},{"code":6001,"name":"InvalidPlanId","msg":"Invalid plan ID"},{"code":6002,"name":"NoActiveSubscription","msg":"No active subscription to cancel"}]}